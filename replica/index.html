<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Mis Cuidados</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background: #f9fafa;
    margin: 20px;
  }
  header {
    background: linear-gradient(to right, #557a95, #2e5769);
    color: white;
    padding: 10px 20px;
    font-weight: bold;
    font-size: 1.5em;
    display: flex;
    align-items: center;
    justify-content: space-between;
  }
  header img {
    height: 30px;
  }
  main {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
    gap: 20px;
    margin-top: 20px;
  }
  section {
    background: white;
    border-radius: 10px;
    padding: 20px;
    box-shadow: 0 0 8px #ccc;
  }
  h3 {
    margin-bottom: 12px;
    font-weight: bold;
  }
  input[type="text"], input[type="time"], input[type="date"], textarea {
    width: 100%;
    padding: 6px 8px;
    margin: 6px 0 12px 0;
    border-radius: 15px;
    border: 1px solid #ccc;
    font-style: italic;
  }
  textarea {
    resize: vertical;
    height: 60px;
  }
  button {
    border-radius: 15px;
    padding: 8px 15px;
    border: none;
    color: white;
    cursor: pointer;
    font-style: italic;
  }
  .button-blue {
    background-color: #1a0dab;
  }
  .button-green {
    background-color: #0F6D39;
  }
  .progress-bar {
    background-color: #e0eaf0;
    border-radius: 10px;
    height: 15px;
    margin: 10px 0;
  }
  .progress-bar > div {
    background-color: #a5d6a7;
    height: 100%;
    width: 0;
    border-radius: 10px;
    transition: width 0.3s ease;
  }
  .progress-text {
    font-style: italic;
    font-size: 0.9em;
    margin-bottom: 5px;
  }
  .stars {
    color: gold;
    font-size: 1.4em;
    cursor: pointer;
  }
  .stars span {
    padding: 0 2px;
  }
  .stars .selected {
    color: #ffb400;
  }

  main {
  display: grid;
  grid-template-columns: 1fr 1fr;   /* Dos columnas iguales */
  grid-template-rows: auto auto;   /* Dos filas automáticas */
  gap: 20px;                       /* Espacio entre recuadros */
  margin-top: 20px;
}


</style>
</head>
<body>

<header>
  <div>Mis cuidados</div>
  <img src="https://upload.wikimedia.org/wikipedia/commons/4/46/Lungs_icon.svg" alt="PulmoVida" />
</header>

<main>
  <!-- Registro de medicamentos -->
  <section>
    <h3>Registro de medicamentos</h3>
    <input type="text" id="medName" placeholder="ingrese el nombre del medicamento" />
    <input type="time" id="medTime1" />
    <input type="time" id="medTime2" />
    <button class="button-blue" id="addReminderBtn">Agregar recordatorio</button>
    <div id="medList" style="margin-top: 10px; font-size: 0.9em;"></div>
  </section>

  <!-- Citas médicas -->
  <section>
    <h3>Citas Médicas</h3>
    <input type="text" id="doctorName" placeholder="Nombre del Doctor" />
    <input type="date" id="appointmentDate" />
    <input type="time" id="appointmentTime" />
    <button class="button-green" id="scheduleBtn">Agendar cita</button>
    <div id="appointmentsList" style="margin-top: 10px; font-size: 0.9em;"></div>
  </section>

  <!-- Progreso del tratamiento -->
  <section>
    <h3>Progreso del tratamiento</h3>
    <div class="progress-text" id="treatmentProgressText">Progreso del tratamiento <span id="monthCount">0</span>/6 meses</div>
    <div class="progress-bar"><div id="progressBar"></div></div>
    <div class="progress-text" id="medicineDaysText">Medicamentos tomados hoy <span id="takenMeds">0</span>/5</div>
    <button class="button-blue" id="newDayBtn">Nuevo día</button>
    <button class="button-blue" id="medTakenBtn">Medicamento tomado</button>
  </section>

  <!-- ¿Cómo te sientes hoy? -->
  <section>
    <h3>¿Cómo te sientes hoy? <span style="font-size: 1.3em;">&#128512;</span></h3>
    <div class="stars" id="starRating">
      <span data-value="1">&#9733;</span><span data-value="2">&#9733;</span><span data-value="3">&#9733;</span><span data-value="4">&#9733;</span><span data-value="5">&#9733;</span><span data-value="6">&#9733;</span><span data-value="7">&#9733;</span><span data-value="8">&#9733;</span><span data-value="9">&#9733;</span><span data-value="10">&#9733;</span>
    </div>
    <textarea id="dayNotes" placeholder="ej: me siento mejor"></textarea>
    <button class="button-green" id="saveMoodBtn">Guardar</button>
    <div id="moodSavedMsg" style="color: green; margin-top: 10px; display:none;">Registro guardado</div>
  </section>
</main>

<script>
  // Medicamentos registrados
  let medications = [];

  document.getElementById('addReminderBtn').addEventListener('click', () => {
    let medName = document.getElementById('medName').value.trim();
    let time1 = document.getElementById('medTime1').value;
    let time2 = document.getElementById('medTime2').value;
    if (!medName) {
      alert("Ingresa el nombre del medicamento");
      return;
    }
    medications.push({ name: medName, times: [time1, time2].filter(t => t) });
    document.getElementById('medName').value = '';
    document.getElementById('medTime1').value = '';
    document.getElementById('medTime2').value = '';
    renderMedList();
  });

  function renderMedList() {
    let list = medications.map(m => `${m.name} - Horarios: ${m.times.join(', ')}`).join('<br/>');
    document.getElementById('medList').innerHTML = list || 'No hay medicamentos registrados';
  }
  renderMedList();

  // Citas médicas
  let appointments = [];

  document.getElementById('scheduleBtn').addEventListener('click', () => {
    let doc = document.getElementById('doctorName').value.trim();
    let date = document.getElementById('appointmentDate').value;
    let time = document.getElementById('appointmentTime').value;
    if (!doc || !date || !time) {
      alert('Completa todos los campos para agendar una cita');
      return;
    }
    appointments.push({ doctor: doc, date, time });
    document.getElementById('doctorName').value = '';
    document.getElementById('appointmentDate').value = '';
    document.getElementById('appointmentTime').value = '';
    renderAppointments();
  });

  function renderAppointments() {
    let list = appointments.map(a => `Doctor: ${a.doctor} - Fecha: ${a.date} - Hora: ${a.time}`).join('<br/>');
    document.getElementById('appointmentsList').innerHTML = list || 'No hay citas agendadas';
  }
  renderAppointments();

  // Progreso tratamiento
  let treatmentMonths = 0;
  let medsTakenToday = 0;
  const maxMonths = 6;
  const maxMeds = 5;

  document.getElementById('newDayBtn').addEventListener('click', () => {
    if(treatmentMonths < maxMonths) treatmentMonths++;
    medsTakenToday = 0;
    updateProgressUI();
  });

  document.getElementById('medTakenBtn').addEventListener('click', () => {
    if(medsTakenToday < maxMeds) medsTakenToday++;
    updateProgressUI();
  });

  function updateProgressUI() {
    document.getElementById('monthCount').textContent = treatmentMonths;
    document.getElementById('takenMeds').textContent = medsTakenToday;
    const progressPct = (treatmentMonths / maxMonths) * 100;
    document.getElementById('progressBar').style.width = progressPct + '%';
  }
  updateProgressUI();

  // Rating de estrellas
  const stars = document.querySelectorAll('#starRating span');
  let currentRating = 0;

  stars.forEach(star => {
    star.addEventListener('click', () => {
      currentRating = parseInt(star.getAttribute('data-value'));
      updateStars(currentRating);
    });
  });

  function updateStars(rating) {
    stars.forEach(star => {
      star.classList.toggle('selected', parseInt(star.getAttribute('data-value')) <= rating);
    });
  }

  // Guardar notas del día
  document.getElementById('saveMoodBtn').addEventListener('click', () => {
    const notes = document.getElementById('dayNotes').value.trim();
    if(currentRating === 0) {
      alert("Por favor, selecciona una calificación de estrellas");
      return;
    }
    // Aquí podrías guardar la información en localStorage o backend
    document.getElementById('dayNotes').value = '';
    updateStars(0);
    currentRating = 0;
    let msg = document.getElementById('moodSavedMsg');
    msg.style.display = 'block';
    setTimeout(() => msg.style.display = 'none', 2000);
  });
</script>

</body>
</html>
